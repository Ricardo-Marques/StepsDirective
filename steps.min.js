!function(a){"use strict";a.module("steps",[]).directive("steps",["$timeout",function(a){return{restrict:"E",link:function(b,c,d){var e,f,g,h,i,j,k,l,m,n,o=0,p=20,q="50%",r=3,s="skyblue",t=0,u=20,v=c,w=v.parent()[0],x=$("step"),y=x.length,z='<div class="steps-circle"></div>',A=d.activeStep,B=!0;if(void 0!==d.bar){var C=!0;v.prepend('<div class="steps-bar"></div>'),g=$(".steps-bar"),g[0].innerHTML='<div class="steps-bar-fill"></div>',h=$(".steps-bar-fill")}else var C=!1;l=void 0!==d.sequential?!0:!1,m=void 0!==d.clickable?!0:!1,n=void 0!==d.noCollapse?!0:!1;var D=function(b){a(function(){b>=0&&y>=b?(x.removeClass("active").eq(b-1).addClass("active"),l?f.each(function(a){b-1>=a?$(this)[0].className="steps-circle active":$(this)[0].className="steps-circle"}):f.eq(b-1).addClass("active").siblings().removeClass("active")):x.removeClass("active"),C&&(h[0].style.right=100/(y-1)*(y-b)+"%")})},E=(function(){v.prepend('<div class="steps-circles"></div>'),e=$(".steps-circles")[0],e.innerHTML=z.repeat(y),f=$(".steps-circle"),f.each(function(){$(this)[0].style.height=$(this)[0].style.width=p+"px",$(this)[0].style.borderRadius=q}),D(A)}(),function(){x.each(function(){$(this).addClass("collapsed")})}),F=function(){x.each(function(){$(this).removeClass("collapsed")})},G=function(){return k=0,x.each(function(){$(this)[0].offsetWidth>=k&&(k=$(this)[0].offsetWidth)}),k},H=function(a){a===!1?x.each(function(a){0!==a&&a!==y-1?($(this)[0].style.left=f[a].offsetLeft+p/2+"px",$(this)[0].style.top=u+"px",$(this)[0].style.transform="translate(-50%,0)",$(this)[0].style.webkitTransform="translate(-50%,0)"):a===y-1?($(this)[0].style.left="100%",$(this)[0].style.top=u+"px",$(this)[0].style.transform="translate(-100%,0)",$(this)[0].style.webkitTransform="translate(-100%,0)"):0===a&&($(this)[0].style.top=u+"px")}):x.each(function(a){$(this)[0].offsetWidth/2>i-(f[a].offsetLeft+p/2)&&0!==a&&a!==y-1&&a>y/2-1?($(this)[0].style.left="100%",$(this)[0].style.top=u+"px",$(this)[0].style.transform="translate(-100%,0)",$(this)[0].style.webkitTransform="translate(-100%,0)"):$(this)[0].offsetWidth/2>f[a].offsetLeft+p/2&&(0!==a||a!==y-1)?($(this)[0].style.left="0px",$(this)[0].style.top=u+"px",$(this)[0].style.transform="translate(0,0)",$(this)[0].style.webkitTransform="translate(0,0)"):0!==a&&a!==y-1?($(this)[0].style.left=f[a].offsetLeft+p/2+"px",$(this)[0].style.top=u+"px",$(this)[0].style.transform="translate(-50%,0)",$(this)[0].style.webkitTransform="translate(-50%,0)"):a===y-1?($(this)[0].style.left="100%",$(this)[0].style.top=u+"px",$(this)[0].style.transform="translate(-100%,0)",$(this)[0].style.webkitTransform="translate(-100%,0)"):0===a&&($(this)[0].style.top=u+"px")})},I=function(){a(function(){i=w.offsetWidth,j=G(),i>=j*y+(o+1.8*p)*(y-1)||n?(H(!B),F()):(H(B),E()),C&&(g[0].style.right=g[0].style.left=g[0].style.top=p/2+"px",g[0].style.height=r+"px",g[0].style.position="absolute",g[0].style.transform="translate(0,-50%)",g[0].style.webkitTransform="translate(0,-50%)",h[0].style.bottom=h[0].style.left=h[0].style.top=t+"px",h[0].style.position="absolute",h[0].style.background=s)})};x.each(function(){$(this)[0].style.position="absolute"}),I(),window.onresize=function(){I()},d.$observe("activeStep",function(a){D(a)}),m&&(f.each(function(a){$(this)[0].style.cursor="pointer",$(this)[0].addEventListener("click",function(){D(a+1)})}),x.each(function(a){$(this)[0].style.cursor="pointer",$(this)[0].addEventListener("click",function(){D(a+1)})}))}}}]),String.prototype.repeat||(String.prototype.repeat=function(a){if(null==this)throw new TypeError("can't convert "+this+" to object");var b=""+this;if(a=+a,a!=a&&(a=0),0>a)throw new RangeError("repeat count must be non-negative");if(a==1/0)throw new RangeError("repeat count must be less than infinity");if(a=Math.floor(a),0==b.length||0==a)return"";if(b.length*a>=1<<28)throw new RangeError("repeat count must not overflow maximum string size");for(var c="";1==(1&a)&&(c+=b),a>>>=1,0!=a;)b+=b;return c})}(angular);